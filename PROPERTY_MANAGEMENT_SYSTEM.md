# ğŸ¢ MCP ê¸°ë°˜ ë¶€ë™ì‚° ë§¤ë¬¼ ê´€ë¦¬ ì‹œìŠ¤í…œ - ì™„ì „ êµ¬í˜„ ê°€ì´ë“œ

## ğŸ“‹ ëª©ì°¨
1. [ì‹œìŠ¤í…œ ê°œìš”](#ì‹œìŠ¤í…œ-ê°œìš”)
2. [ì „ì²´ ì•„í‚¤í…ì²˜](#ì „ì²´-ì•„í‚¤í…ì²˜)
3. [í•µì‹¬ ì»´í¬ë„ŒíŠ¸](#í•µì‹¬-ì»´í¬ë„ŒíŠ¸)
4. [êµ¬í˜„ ìƒì„¸](#êµ¬í˜„-ìƒì„¸)
5. [ì„¤ì¹˜ ë° ì‹¤í–‰](#ì„¤ì¹˜-ë°-ì‹¤í–‰)
6. [ìš´ì˜ ê°€ì´ë“œ](#ìš´ì˜-ê°€ì´ë“œ)

## ì‹œìŠ¤í…œ ê°œìš”

### ëª©ì 
ê³µì¸ì¤‘ê°œì‚¬ì˜ ë§¤ë¬¼ ê´€ë¦¬ ì—…ë¬´ë¥¼ ì™„ì „ ìë™í™”í•˜ëŠ” ë¶„ì‚° ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì‹œìŠ¤í…œ

### í•µì‹¬ ê¸°ëŠ¥
- âœ… ë‹¤ì¤‘ í”Œë«í¼ ì‹¤ì‹œê°„ ë§¤ë¬¼ ìˆ˜ì§‘
- âœ… ì§€ëŠ¥í˜• ë°ì´í„° ì •ê·œí™” ë° ì¤‘ë³µ ì œê±°
- âœ… ì‹¤ì‹œê°„ ê°€ê²© ë³€ë™ ì¶”ì 
- âœ… ê³ ê° ë§ì¶¤ ë§¤ë¬¼ ë§¤ì¹­
- âœ… ìë™ ë¦¬í¬íŠ¸ ìƒì„±
- âœ… ì•Œë¦¼ ë° ëª¨ë‹ˆí„°ë§

## ì „ì²´ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ì™¸ë¶€ ì¸í„°í˜ì´ìŠ¤ ê³„ì¸µ                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Web Dashboard â”‚ Mobile App â”‚ REST API â”‚ GraphQL â”‚ WebSocket   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API Gateway (Kong/Nginx)                    â”‚
â”‚                    - ì¸ì¦/ì¸ê°€ - ë¼ìš°íŒ… - ìºì‹±                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MCP ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„° ì„œë²„                         â”‚
â”‚              (ì¤‘ì•™ ì œì–´, ì‘ì—… ë¶„ë°°, ìƒíƒœ ê´€ë¦¬)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Task Queue Manager    â”‚ â€¢ Agent Registry                      â”‚
â”‚ â€¢ Load Balancer        â”‚ â€¢ Health Monitor                       â”‚
â”‚ â€¢ Result Aggregator    â”‚ â€¢ Event Bus                           â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚          â”‚          â”‚          â”‚          â”‚
  [ìˆ˜ì§‘ ê³„ì¸µ] [ì²˜ë¦¬ ê³„ì¸µ] [ì €ì¥ ê³„ì¸µ] [ë¶„ì„ ê³„ì¸µ] [ì•Œë¦¼ ê³„ì¸µ]
```

### ì‹œìŠ¤í…œ êµ¬ì„± ìš”ì†Œ

```yaml
1. ìˆ˜ì§‘ ê³„ì¸µ (Collection Layer):
   - 10+ í”Œë«í¼ í¬ë¡¤ëŸ¬
   - ë™ì  ë Œë”ë§ ì§€ì›
   - Rate limiting
   - Proxy rotation

2. ì²˜ë¦¬ ê³„ì¸µ (Processing Layer):
   - ë°ì´í„° ì •ê·œí™”
   - ì¤‘ë³µ ì œê±°
   - ì´ë¯¸ì§€ ì²˜ë¦¬
   - OCR ì²˜ë¦¬

3. ì €ì¥ ê³„ì¸µ (Storage Layer):
   - PostgreSQL (ë©”ì¸ DB)
   - MongoDB (ì›ì‹œ ë°ì´í„°)
   - Redis (ìºì‹œ)
   - S3 (ì´ë¯¸ì§€/ë¬¸ì„œ)

4. ë¶„ì„ ê³„ì¸µ (Analytics Layer):
   - ê°€ê²© ë¶„ì„
   - íŠ¸ë Œë“œ ë¶„ì„
   - ì‹œì¥ ì˜ˆì¸¡
   - ì´ìƒ íƒì§€

5. ì•Œë¦¼ ê³„ì¸µ (Notification Layer):
   - ì‹¤ì‹œê°„ ì•Œë¦¼
   - ì´ë©”ì¼/SMS
   - í‘¸ì‹œ ì•Œë¦¼
   - Webhook
```

## í•µì‹¬ ì»´í¬ë„ŒíŠ¸

### 1. MCP ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„° ì„œë²„

```python
# src/mcp/orchestrator/main.py
"""
MCP ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„° ë©”ì¸ ì„œë²„
"""
from fastapi import FastAPI, WebSocket
from typing import Dict, List
import asyncio
import uvicorn

app = FastAPI(title="MCP Orchestrator")

class MCPOrchestrator:
    def __init__(self):
        self.agents = {}
        self.tasks = {}
        self.websockets = {}
        
    async def start(self):
        # ì‹œìŠ¤í…œ ì´ˆê¸°í™”
        await self.init_database()
        await self.init_cache()
        await self.init_message_queue()
        
@app.on_event("startup")
async def startup():
    orchestrator.start()

@app.websocket("/ws/{agent_id}")
async def websocket_endpoint(websocket: WebSocket, agent_id: str):
    await websocket.accept()
    # WebSocket ì—°ê²° ê´€ë¦¬
```

### 2. ìˆ˜ì§‘ ì„œë¸Œì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ

```python
# src/agents/collectors/base.py
"""
ìˆ˜ì§‘ ì—ì´ì „íŠ¸ ë² ì´ìŠ¤ í´ë˜ìŠ¤
"""
class CollectorAgent:
    def __init__(self, platform: str):
        self.platform = platform
        self.session = None
        
    async def collect(self, area: str, filters: dict):
        # í”Œë«í¼ë³„ ìˆ˜ì§‘ ë¡œì§
        pass
        
    async def validate(self, data: dict):
        # ë°ì´í„° ê²€ì¦
        pass
```

### 3. ë°ì´í„° ëª¨ë¸

```python
# src/models/property.py
"""
ë§¤ë¬¼ ë°ì´í„° ëª¨ë¸
"""
from sqlalchemy import Column, String, Integer, Float, DateTime
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()

class Property(Base):
    __tablename__ = 'properties'
    
    id = Column(String, primary_key=True)
    platform = Column(String, nullable=False)
    title = Column(String)
    price = Column(Integer)
    area = Column(Float)
    address = Column(String)
    # ... ì¶”ê°€ í•„ë“œ
```

## êµ¬í˜„ ìƒì„¸

### ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
property-management-system/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ mcp/
â”‚   â”‚   â”œâ”€â”€ orchestrator/
â”‚   â”‚   â”‚   â”œâ”€â”€ main.py
â”‚   â”‚   â”‚   â”œâ”€â”€ coordinator.py
â”‚   â”‚   â”‚   â”œâ”€â”€ scheduler.py
â”‚   â”‚   â”‚   â””â”€â”€ monitor.py
â”‚   â”‚   â”œâ”€â”€ communication/
â”‚   â”‚   â”‚   â”œâ”€â”€ websocket.py
â”‚   â”‚   â”‚   â”œâ”€â”€ message_queue.py
â”‚   â”‚   â”‚   â””â”€â”€ event_bus.py
â”‚   â”‚   â””â”€â”€ config/
â”‚   â”‚       â””â”€â”€ settings.py
â”‚   â”‚
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”œâ”€â”€ collectors/
â”‚   â”‚   â”‚   â”œâ”€â”€ base.py
â”‚   â”‚   â”‚   â”œâ”€â”€ naver.py
â”‚   â”‚   â”‚   â”œâ”€â”€ zigbang.py
â”‚   â”‚   â”‚   â”œâ”€â”€ dabang.py
â”‚   â”‚   â”‚   â”œâ”€â”€ kb.py
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ processors/
â”‚   â”‚   â”‚   â”œâ”€â”€ normalizer.py
â”‚   â”‚   â”‚   â”œâ”€â”€ deduplicator.py
â”‚   â”‚   â”‚   â”œâ”€â”€ validator.py
â”‚   â”‚   â”‚   â””â”€â”€ image_processor.py
â”‚   â”‚   â”œâ”€â”€ storage/
â”‚   â”‚   â”‚   â”œâ”€â”€ database.py
â”‚   â”‚   â”‚   â”œâ”€â”€ cache.py
â”‚   â”‚   â”‚   â””â”€â”€ file_storage.py
â”‚   â”‚   â””â”€â”€ analytics/
â”‚   â”‚       â”œâ”€â”€ price_analyzer.py
â”‚   â”‚       â”œâ”€â”€ trend_analyzer.py
â”‚   â”‚       â””â”€â”€ anomaly_detector.py
â”‚   â”‚
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ property.py
â”‚   â”‚   â”œâ”€â”€ agent.py
â”‚   â”‚   â”œâ”€â”€ task.py
â”‚   â”‚   â””â”€â”€ user.py
â”‚   â”‚
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ gateway.py
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”‚   â”œâ”€â”€ properties.py
â”‚   â”‚   â”‚   â”œâ”€â”€ agents.py
â”‚   â”‚   â”‚   â””â”€â”€ tasks.py
â”‚   â”‚   â””â”€â”€ middleware/
â”‚   â”‚       â”œâ”€â”€ auth.py
â”‚   â”‚       â””â”€â”€ rate_limit.py
â”‚   â”‚
â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”œâ”€â”€ connection.py
â”‚   â”‚   â”œâ”€â”€ migrations/
â”‚   â”‚   â””â”€â”€ seeds/
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ logger.py
â”‚   â”‚   â”œâ”€â”€ metrics.py
â”‚   â”‚   â””â”€â”€ helpers.py
â”‚   â”‚
â”‚   â””â”€â”€ tests/
â”‚       â”œâ”€â”€ unit/
â”‚       â”œâ”€â”€ integration/
â”‚       â””â”€â”€ e2e/
â”‚
â”œâ”€â”€ docker/
â”‚   â”œâ”€â”€ Dockerfile.orchestrator
â”‚   â”œâ”€â”€ Dockerfile.collector
â”‚   â”œâ”€â”€ Dockerfile.processor
â”‚   â””â”€â”€ docker-compose.yml
â”‚
â”œâ”€â”€ kubernetes/
â”‚   â”œâ”€â”€ deployments/
â”‚   â”œâ”€â”€ services/
â”‚   â””â”€â”€ configmaps/
â”‚
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ development.yaml
â”‚   â”œâ”€â”€ staging.yaml
â”‚   â””â”€â”€ production.yaml
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ setup.sh
â”‚   â”œâ”€â”€ deploy.sh
â”‚   â””â”€â”€ monitor.sh
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ API.md
â”‚   â”œâ”€â”€ ARCHITECTURE.md
â”‚   â””â”€â”€ DEPLOYMENT.md
â”‚
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ .env.example
â””â”€â”€ README.md
```

### í™˜ê²½ ì„¤ì • íŒŒì¼

```yaml
# config/production.yaml
system:
  name: "Property Management System"
  version: "1.0.0"
  environment: "production"

mcp:
  orchestrator:
    host: "0.0.0.0"
    port: 8000
    workers: 4
    
  websocket:
    ping_interval: 30
    timeout: 60
    max_connections: 1000
    
  task_queue:
    broker: "redis://redis:6379/0"
    backend: "redis://redis:6379/1"
    
database:
  postgresql:
    host: "postgres"
    port: 5432
    database: "property_db"
    user: "${DB_USER}"
    password: "${DB_PASSWORD}"
    pool_size: 20
    
  mongodb:
    uri: "mongodb://mongo:27017"
    database: "property_raw"
    
  redis:
    host: "redis"
    port: 6379
    db: 0
    
collectors:
  naver:
    enabled: true
    rate_limit: 2
    max_workers: 5
    proxy_enabled: true
    
  zigbang:
    enabled: true
    rate_limit: 3
    max_workers: 3
    
monitoring:
  prometheus:
    enabled: true
    port: 9090
    
  grafana:
    enabled: true
    port: 3000
    
  elasticsearch:
    enabled: true
    host: "elasticsearch"
    port: 9200
```

## ì„¤ì¹˜ ë° ì‹¤í–‰

### 1. ì‚¬ì „ ì¤€ë¹„

```bash
# ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/your-org/property-management-system.git
cd property-management-system

# Python ê°€ìƒí™˜ê²½ ìƒì„±
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# Playwright ë¸Œë¼ìš°ì € ì„¤ì¹˜
playwright install chromium

# í™˜ê²½ë³€ìˆ˜ ì„¤ì •
cp .env.example .env
# .env íŒŒì¼ í¸ì§‘í•˜ì—¬ í•„ìš”í•œ ê°’ ì„¤ì •
```

### 2. Docker Composeë¡œ ì „ì²´ ì‹œìŠ¤í…œ ì‹¤í–‰

```yaml
# docker-compose.yml
version: '3.8'

services:
  # MCP ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°
  orchestrator:
    build:
      context: .
      dockerfile: docker/Dockerfile.orchestrator
    ports:
      - "8000:8000"
    environment:
      - ENV=production
    depends_on:
      - postgres
      - redis
      - mongo
    networks:
      - property-net
      
  # ìˆ˜ì§‘ ì—ì´ì „íŠ¸ (ìŠ¤ì¼€ì¼ë§ ê°€ëŠ¥)
  collector-naver:
    build:
      context: .
      dockerfile: docker/Dockerfile.collector
    environment:
      - PLATFORM=naver
      - ORCHESTRATOR_URL=http://orchestrator:8000
    deploy:
      replicas: 3
    networks:
      - property-net
      
  collector-zigbang:
    build:
      context: .
      dockerfile: docker/Dockerfile.collector
    environment:
      - PLATFORM=zigbang
      - ORCHESTRATOR_URL=http://orchestrator:8000
    deploy:
      replicas: 2
    networks:
      - property-net
      
  # ì²˜ë¦¬ ì—ì´ì „íŠ¸
  processor:
    build:
      context: .
      dockerfile: docker/Dockerfile.processor
    environment:
      - ORCHESTRATOR_URL=http://orchestrator:8000
    deploy:
      replicas: 2
    networks:
      - property-net
      
  # ë°ì´í„°ë² ì´ìŠ¤
  postgres:
    image: postgres:14
    environment:
      - POSTGRES_DB=property_db
      - POSTGRES_USER=admin
      - POSTGRES_PASSWORD=secret
    volumes:
      - postgres-data:/var/lib/postgresql/data
    networks:
      - property-net
      
  # MongoDB
  mongo:
    image: mongo:5
    volumes:
      - mongo-data:/data/db
    networks:
      - property-net
      
  # Redis
  redis:
    image: redis:7-alpine
    networks:
      - property-net
      
  # API Gateway
  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
    depends_on:
      - orchestrator
    networks:
      - property-net
      
  # ëª¨ë‹ˆí„°ë§
  prometheus:
    image: prom/prometheus
    ports:
      - "9090:9090"
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml
    networks:
      - property-net
      
  grafana:
    image: grafana/grafana
    ports:
      - "3000:3000"
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=admin
    networks:
      - property-net

volumes:
  postgres-data:
  mongo-data:

networks:
  property-net:
    driver: bridge
```

### 3. ì‹œìŠ¤í…œ ì‹œì‘

```bash
# Docker Composeë¡œ ì „ì²´ ì‹œìŠ¤í…œ ì‹œì‘
docker-compose up -d

# ë¡œê·¸ í™•ì¸
docker-compose logs -f orchestrator

# ìƒíƒœ í™•ì¸
docker-compose ps

# ìŠ¤ì¼€ì¼ë§
docker-compose up -d --scale collector-naver=5
```

### 4. API ì‚¬ìš© ì˜ˆì‹œ

```python
# client_example.py
import requests
import asyncio
import websockets
import json

# REST API ì‚¬ìš©
def collect_properties():
    """ë§¤ë¬¼ ìˆ˜ì§‘ ì‹œì‘"""
    response = requests.post(
        "http://localhost:8000/api/v1/tasks",
        json={
            "type": "collect",
            "areas": ["ê°•ë‚¨êµ¬", "ì„œì´ˆêµ¬"],
            "platforms": ["naver", "zigbang"],
            "filters": {
                "price_min": 100000,
                "price_max": 200000,
                "area_min": 60
            }
        }
    )
    return response.json()

# WebSocketìœ¼ë¡œ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
async def monitor_collection():
    """ì‹¤ì‹œê°„ ìˆ˜ì§‘ ìƒíƒœ ëª¨ë‹ˆí„°ë§"""
    async with websockets.connect("ws://localhost:8000/ws/monitor") as websocket:
        while True:
            message = await websocket.recv()
            data = json.loads(message)
            print(f"Status: {data}")

# GraphQL ì¿¼ë¦¬
def search_properties():
    """ë§¤ë¬¼ ê²€ìƒ‰"""
    query = """
    query SearchProperties {
        properties(
            area: "ê°•ë‚¨êµ¬"
            priceMin: 100000
            priceMax: 150000
        ) {
            id
            title
            price
            area
            address
            platform
        }
    }
    """
    response = requests.post(
        "http://localhost:8000/graphql",
        json={"query": query}
    )
    return response.json()
```

## ìš´ì˜ ê°€ì´ë“œ

### ëª¨ë‹ˆí„°ë§

```bash
# Grafana ëŒ€ì‹œë³´ë“œ ì ‘ì†
http://localhost:3000
# admin / admin

# Prometheus ë©”íŠ¸ë¦­ í™•ì¸
http://localhost:9090

# í—¬ìŠ¤ì²´í¬
curl http://localhost:8000/health

# ì—ì´ì „íŠ¸ ìƒíƒœ
curl http://localhost:8000/api/v1/agents/status
```

### ë¡œê·¸ ê´€ë¦¬

```python
# src/utils/logger.py
import logging
from loguru import logger
import sys

# ë¡œê·¸ ì„¤ì •
logger.remove()
logger.add(
    sys.stdout,
    format="{time:YYYY-MM-DD HH:mm:ss} | {level} | {module}:{function}:{line} - {message}",
    level="INFO"
)
logger.add(
    "logs/app_{time:YYYY-MM-DD}.log",
    rotation="1 day",
    retention="30 days",
    level="DEBUG"
)

# ELK ìŠ¤íƒ ì—°ë™
logger.add(
    "logstash://localhost:5000",
    format="json",
    level="INFO"
)
```

### ì„±ëŠ¥ ìµœì í™”

```python
# src/utils/performance.py
"""
ì„±ëŠ¥ ìµœì í™” ìœ í‹¸ë¦¬í‹°
"""
import asyncio
from functools import lru_cache
import aioredis

class PerformanceOptimizer:
    def __init__(self):
        self.redis = None
        
    @lru_cache(maxsize=1000)
    def get_cached_result(self, key):
        """ë©”ëª¨ë¦¬ ìºì‹±"""
        pass
        
    async def get_redis_cache(self, key):
        """Redis ìºì‹±"""
        if not self.redis:
            self.redis = await aioredis.create_redis_pool('redis://localhost')
        return await self.redis.get(key)
        
    async def batch_process(self, items, batch_size=100):
        """ë°°ì¹˜ ì²˜ë¦¬"""
        for i in range(0, len(items), batch_size):
            batch = items[i:i+batch_size]
            await self.process_batch(batch)
```

### ì—ëŸ¬ ì²˜ë¦¬

```python
# src/utils/error_handler.py
"""
ì „ì—­ ì—ëŸ¬ ì²˜ë¦¬
"""
from typing import Optional
import traceback

class ErrorHandler:
    @staticmethod
    async def handle_error(error: Exception, context: dict) -> Optional[dict]:
        """ì—ëŸ¬ ì²˜ë¦¬ ë° ë³µêµ¬"""
        error_type = type(error).__name__
        
        if error_type == "ConnectionError":
            # ì¬ì—°ê²° ì‹œë„
            return await ErrorHandler.retry_connection(context)
        elif error_type == "TimeoutError":
            # íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬
            return await ErrorHandler.handle_timeout(context)
        else:
            # ì¼ë°˜ ì—ëŸ¬ ë¡œê¹…
            logger.error(f"Error: {error}\nContext: {context}\n{traceback.format_exc()}")
            return None
```

### ë°±ì—… ë° ë³µêµ¬

```bash
#!/bin/bash
# scripts/backup.sh

# PostgreSQL ë°±ì—…
docker exec postgres pg_dump -U admin property_db > backup_$(date +%Y%m%d).sql

# MongoDB ë°±ì—…
docker exec mongo mongodump --out /backup/$(date +%Y%m%d)

# Redis ë°±ì—…
docker exec redis redis-cli BGSAVE

# S3 ì—…ë¡œë“œ
aws s3 cp backup_$(date +%Y%m%d).sql s3://backup-bucket/postgres/
```

## ë³´ì•ˆ ì„¤ì •

```python
# src/api/middleware/security.py
"""
ë³´ì•ˆ ë¯¸ë“¤ì›¨ì–´
"""
from fastapi import Security, HTTPException
from fastapi.security import HTTPBearer, HTTPAuthorizationCredentials
import jwt

security = HTTPBearer()

async def verify_token(credentials: HTTPAuthorizationCredentials = Security(security)):
    token = credentials.credentials
    try:
        payload = jwt.decode(token, SECRET_KEY, algorithms=["HS256"])
        return payload
    except jwt.ExpiredSignatureError:
        raise HTTPException(status_code=401, detail="Token expired")
    except jwt.InvalidTokenError:
        raise HTTPException(status_code=401, detail="Invalid token")
```

## í…ŒìŠ¤íŠ¸

```python
# tests/test_collector.py
import pytest
from src.agents.collectors.naver import NaverCollector

@pytest.mark.asyncio
async def test_naver_collector():
    collector = NaverCollector()
    results = await collector.collect("ê°•ë‚¨êµ¬", {"limit": 10})
    
    assert len(results) > 0
    assert all('price' in item for item in results)
    assert all('area' in item for item in results)
```

## ë°°í¬

### Kubernetes ë°°í¬

```yaml
# kubernetes/deployments/orchestrator.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: mcp-orchestrator
spec:
  replicas: 3
  selector:
    matchLabels:
      app: orchestrator
  template:
    metadata:
      labels:
        app: orchestrator
    spec:
      containers:
      - name: orchestrator
        image: property-system/orchestrator:latest
        ports:
        - containerPort: 8000
        env:
        - name: ENV
          value: "production"
        resources:
          requests:
            memory: "512Mi"
            cpu: "500m"
          limits:
            memory: "1Gi"
            cpu: "1000m"
```

ì´ ì‹œìŠ¤í…œì€ **ì‹¤ì œ í”„ë¡œë•ì…˜ í™˜ê²½**ì—ì„œ ìš´ì˜ ê°€ëŠ¥í•œ ì™„ì „í•œ ë§¤ë¬¼ ê´€ë¦¬ ì‹œìŠ¤í…œì…ë‹ˆë‹¤!